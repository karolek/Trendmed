<?php if (count($this->reservations) >0 ): ?>
<table class="table reservationList">
    <thead>
    <tr>
        <th>
            <?= $this->translate('Date added'); ?>
        </th>
        <th>
            <?= $this->translate('Date of reservation'); ?>
        </th>
        <th>
            <?= $this->translate('Clinic'); ?>
        </th>
        <th>
            <?= $this->translate('Services'); ?>
        </th>
        <th>
            <?= $this->translate('Status'); ?>
        </th>
        <th>
            <?= $this->translate('Actions'); ?>
        </th>
    </tr>
    </thead>
    <tbody>
        <?php foreach ($this->reservations as $reservation): ?>
            <tr class="<?= $reservation->getStatus(); ?>">
                <td><?= $reservation->created->format("d-m-Y"); ?></td>
                <td><?= $this->translate('From'); ?> <?= $reservation->dateFrom->format("d-m-Y"); ?>
                    <?= $this->translate('to'); ?> <?= $reservation->dateTo->format("d-m-Y"); ?> </td>
                <td><?= $reservation->clinic->name; ?></td>
                <td>
                    <ul>
                    <?php foreach($reservation->services as $service): ?>
                        <li><?= $service->category->name; ?></li>
                    <?php endforeach; ?>
                    </ul>
                </td>
                <td>
                    <?php $status =  $reservation->getStatusAsArray(); echo $this->translate($status['name']); ?>
                </td>
                <td>

                    <div class="btn-group">
                        <a class="btn" href="<?= $this->url(
                            array(
                                'action' => 'view',
                                'controller' =>
                                'reservations',
                                'module' => 'patient',
                                'id' => $reservation->id), 'default', true); ?>"><?= $this->translate('See details'); ?></a>
                        <?php if(count($status['actions']['patient']) >0 ): ?>
                        <button class="btn dropdown-toggle" data-toggle="dropdown">
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <!-- dropdown menu links -->
                            <?php foreach($status['actions']['patient'] as $action): ?>
                            <li>
                                <a href="<?= $this->url(array('id' => $reservation->id),
                                    $this->config->reservation->action->patient->$action->routeName); ?>">
                                    <?= $this->translate($this->config->reservation->action->patient->$action->name); ?>
                                </a>
                            </li>
                            <?php endforeach; ?>
                        </ul>
                        <?php endif;?>
                    </div>
                </td>
            </tr>
        <?php endforeach; ?>
    </tbody>
</table>
<?php else: ?>
    <div class="alert alert-block">
        <?= $this->translate('You do not have any reservations yet.'); ?>
    </div>
<?php endif;?>

<?= $this->ShowFavClinics($this->LoggedUser()); ?>